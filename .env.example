# Environment Variables Template for Full Migration

# ============== BACKEND (Express - Optional during migration) ==============
# You can keep these during gradual migration, remove when fully on Next.js

# Database - Use pooled connection for Vercel serverless (CRITICAL for performance)
# IMPORTANT: connection_limit should be low (5-10) for serverless to prevent pool exhaustion
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=10&pool_timeout=20"

# Direct connection for migrations only
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@db.supabase.co:5432/postgres"

# Server config
PORT=7070
NODE_ENV=development

# Frontend URL for CORS
FRONTEND_URL=http://localhost:8080


# ============== FRONTEND (Next.js) ==============

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://[PROJECT-REF].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Database (same as backend) - Use pooled connection
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=10&pool_timeout=20"
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@db.supabase.co:5432/postgres"

# API URL (for hybrid approach - can remove after full migration)
NEXT_PUBLIC_API_URL=http://localhost:7070

# Session secret for Next.js auth
SESSION_SECRET=generate-a-random-32-character-string-here

# App URL
NEXT_PUBLIC_APP_URL=http://localhost:8080


# ============== HOW TO GET THESE VALUES ==============

# 1. SUPABASE_URL and ANON_KEY:
#    Supabase Dashboard → Settings → API
#    - Project URL = NEXT_PUBLIC_SUPABASE_URL
#    - anon/public key = NEXT_PUBLIC_SUPABASE_ANON_KEY

# 2. SERVICE_ROLE_KEY:
#    Supabase Dashboard → Settings → API
#    - service_role key = SUPABASE_SERVICE_ROLE_KEY
#    ⚠️  NEVER expose this in client-side code!

# 3. DATABASE_URL (Pooled):
#    Supabase Dashboard → Settings → Database → Connection Pooling
#    - Copy "Transaction" mode connection string
#    - Port should be 6543
#    - Add ?pgbouncer=true&connection_limit=10

# 4. DIRECT_URL:
#    Supabase Dashboard → Settings → Database → Connection String
#    - Use "URI" format
#    - Port should be 5432

# 5. SESSION_SECRET:
#    Generate with: openssl rand -base64 32


# ============== DEPLOYMENT (Vercel) ==============

# Add all NEXT_PUBLIC_* and SUPABASE_* variables to Vercel:
# vercel env add NEXT_PUBLIC_SUPABASE_URL
# vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY
# vercel env add SUPABASE_SERVICE_ROLE_KEY
# vercel env add DATABASE_URL
# vercel env add DIRECT_URL
# vercel env add SESSION_SECRET
